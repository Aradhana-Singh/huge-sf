<apex:page standardController="opportunity" extensions="ContactFormsCont" showheader="false">
<apex:stylesheet value="{!URLFOR($Resource.jqueryUIcss)}" />
  <style>
    .ui-widget-content .ui-icon {
      background-image: url("{!$Resource.UIIcons}");
    }
    .ui-widget-header .ui-icon {
      background-image: url("{!$Resource.UIIcons}"); 
    }
    .ui-front {
      z-index: 10;
    }
  </style>
  <script src="{!URLFOR($Resource.jquery1_11)}"></script>
  <script src="{!URLFOR($Resource.jqueryUI)}"></script>

  <script>
    $j = jQuery.noConflict();
    $j(function() {
      $j( ".dialog" ).dialog({
        autoOpen: false,
        width: 1000
        // maxHeight: 800,
      });
    });


    function newContactDialog(){
        $j("#newContactDialog").dialog("option", "title", "Create Contact");
        $j("#newContactDialog").dialog("open");
        
        
        return false;
    }
    
    function openWindow() {
        window.open("/apex/ContactQuickCreate?renderImmediately=true", "quickCreate", "width=30%");
    }
    
    
 
  </script>
      <apex:form rendered="{!NOT(renderImmediately)}">
            <apex:actionstatus id="refreshStatus">
                <apex:facet name="start">
                    <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb; height: 100%;opacity:0.65;width:100%;">
                       <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                           <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                            <span class="waitingDescription">Please Wait...</span>
                       </div>
                    </div>
                </apex:facet>
            </apex:actionstatus>    
        
        <apex:commandButton value="New Contact"   status="refreshStatus" rerender="contactUpsertPanel" id="newContactBtn" oncomplete="openWindow();"  />
       </apex:form>
        <apex:outputPanel layout="inline" id="contactUpsertPanel" rendered="{!renderImmediately}">
            <c:ContactForms contact="{!con}" redirect="false" onSave="window.close();" />
        </apex:outputPanel>
   
    
</apex:page>