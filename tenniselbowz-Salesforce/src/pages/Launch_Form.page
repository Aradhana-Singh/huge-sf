<apex:page title="Launch Form" controller="LaunchFormController" showHeader="false" sidebar="false" standardStylesheets="true" action="{!loginSalesPortal}">
    <apex:image id="daikinLogoImage" url="{!$Resource.Daikin_Logo}" width="200" height="60"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <apex:form >
        <apex:actionFunction name="radioButtonClicked" action="{!setdisableFieldFlags}" reRender="inputFields, status"/>
        
        <apex:pageBlock >
            <apex:pageBlockSection >
                <apex:outputText ></apex:outputText>
                <h1 style="text-align:center;color:blue;font-size:250%">
                    Launch Form Page
                </h1>
            </apex:pageBlockSection>
            <apex:pageBlockSection >
                <apex:selectList label="Form Types" size="1" value="{!formType}">
                    <apex:selectOptions value="{!formTypes}"/>
                </apex:selectList>
            </apex:pageBlockSection>
            <br/>
            <br/>
            <br/>
            <apex:pageBlockSection >
                <apex:selectRadio label="Action" value="{!action}" layout="pageDirection" onchange="radioButtonClicked()">
                    <apex:selectOptions value="{!actions}"/>
                </apex:selectRadio>
            </apex:pageBlockSection>
            <br/>
            <br/>
            <br/>
            <apex:pageBlockSection columns="1" id="inputFields">
                <apex:inputField label="Address Id" value="{!jhaForm.Jobsite_Address__c}" id="addressId" rendered="{!NOT(disableAddrId)}">
                    <apex:actionSupport event="onchange" 
                                action="{!retrieveAddressAndAccount}" 
                                rerender="accountName, jobSiteAddress, status"/>
                </apex:inputField>
                <apex:outputText value="{!jhaForm.Jobsite_Address__c}" label="Address Id" id="addressId2" rendered="{!disableAddrId}"/>
                
                <apex:inputField label="Date" value="{!jhaForm.Date__c}" id="date" rendered="{!NOT(disableDate)}"/>
                <apex:outputText value="{!jhaForm.Date__c}" label="Date" id="date2" rendered="{!disableDate}"/>
                
                <apex:outputText value="{!customerName}" label="Customer Name" id="accountName"/>
                
                <apex:outputText value="{!jobSiteAddress}" label="Jobsite Address" id="jobSiteAddress"/>

               <!-- <script>document.getElementById('{!$Component.addressId}').disabled = {!disableAddrId}; document.getElementById('{!$Component.date}').disabled = {!disableDate};</script> -->
            </apex:pageBlockSection>
            <br/>
            <br/>
            <br/>
            <apex:pageBlockSection columns="1">
                <apex:outputText value="{!status}" label="Status" id="status" style="color:red"/>
            </apex:pageBlockSection>
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton value="Submit" action="{!get}" oncomplete="launchForm('{!formURLName}');" reRender="status"/>
            </apex:pageBlockButtons>
        </apex:pageBlock>
        
    </apex:form>

    <script>
    	function launchForm(x)
    	{
            //alert('launchform');
            //window.open("/apex/JHA_Form");
            if (x != "")
            {
                //var url = "/apex/" + x;
            	window.open(x);
            }
        }
    
    	function disableAllInputFields()
    	{
            //alert('disableAllInputFields');
            //$("[id$=accountName]").prop("disabled",true);
            //$("[id$=addressId]").prop("disabled",true);
            //$("[id$=date]").prop("disabled",true);
        }
    </script>
    
    <apex:outputText value="{!callfunc}" escape="false"></apex:outputText>
</apex:page>