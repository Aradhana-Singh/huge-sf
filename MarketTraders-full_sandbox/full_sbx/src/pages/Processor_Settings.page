<apex:page showHeader="true" sidebar="false" standardStylesheets="true" controller="ProcessorController" id="processorSettings">
<head>
    <apex:stylesheet value="{!$Resource.processor_main}"/>
    <apex:stylesheet value="{!URLFOR($Resource.modal_style, 'modal_style.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.jquery_ui, '/jquery_ui/css/ui-lightness/jquery-ui-1.10.4.custom.min.css')}"/>
    <apex:includeScript value="{!$Resource.jquery_V_1_11_0}"/>
    <apex:includeScript value="{!URLFOR($Resource.jquery_ui, '/jquery_ui/js/jquery-ui-1.10.4.custom.min.js')}"/>
    <apex:includeScript value="{!$Resource.tablesorter}"/>
    <script>
        $j = jQuery.noConflict();
    </script>
</head>
<body>
<apex:pageMessages />
<apex:form >
    <apex:pageBlock title="{!selectedProcessorName}" id="processorSettingsBlock">
    
        <apex:pageBlockSection title="Options" id="processorOptions">

            <apex:pageBlockSectionItem rendered="{!processor.configuration.showPresenter}">
                <apex:outputLabel value="Presenter" for="presenter"/>
                <apex:inputField value="{!processor.webinar.PrimaryPresenter__c}" id="presenter" required="true"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!processor.configuration.showSecondaryPresenter}" id="secondaryPresenterItem">
                <apex:outputLabel value="Secondary Presenter" for="secondaryPresenter"/>
                <apex:inputField value="{!processor.webinar.SecondaryPresenter__c}" id="secondaryPresenter"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem id="discountdollarblock" rendered="{!processor.configuration.showDiscount}">
                <apex:outputLabel value="Discount (Dollar)" for="discountdollar"/>
                <apex:inputField value="{!processor.webinar.DiscountDollar__c}" id="discountdollar"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem id="discountpercentblock" rendered="{!processor.configuration.showDiscount}" >
                <apex:outputLabel value="Discount (Percent)" for="discountpercent"/>
                <apex:inputField value="{!processor.webinar.DiscountPercent__c}" id="discountpercent"/>
            </apex:pageBlockSectionItem>

            <apex:pageBlockSectionItem rendered="{!processor.configuration.showDownPayment}" >
                <apex:outputLabel value="Down Payment" for="downpayment"/>
                <apex:inputField value="{!processor.webinar.Down_Payment__c}" id="downpayment"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!processor.configuration.showPromotion}" id="promotions">
                <apex:outputLabel value="Promotion" for="promotion"/>
                <apex:selectList value="{!processor.webinar.Promotion__c}" multiselect="false" size="1" id="promotion" required="true">
                    <apex:selectOptions value="{!promotions}"/>
                </apex:selectList>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!processor.configuration.showPeopleAtPrice}" >
                <apex:outputLabel value="People at Price" for="peopleatprice"/>
                <apex:inputField value="{!processor.webinar.People_at_Price__c}" id="peopleatprice" required="true"/>
            </apex:pageBlockSectionItem>
            
           <apex:pageBlockSectionItem rendered="{!isNotClassesProcessor}">
                <apex:outputLabel value="Price Presented" for="pricepresented"/>
                <apex:inputField value="{!processor.webinar.Price_Presented__c}" id="pricepresented" required="true"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!isNotClassesProcessor}">
                <apex:outputLabel value="Product Presented" for="productpresented"/>
                <apex:inputField value="{!processor.webinar.Product_Presented__c}" id="productpresented" required="true"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="false" >
                <apex:outputLabel value="Presentation Deck" for="presentationdeck" />
                <apex:inputField value="{!processor.webinar.Presentation_Deck__c}" id="presentationdeck" required="false" />
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!processor.configuration.showAttentiveRate}" >
                <apex:outputLabel value="Attentive Rate at Close" for="attentiverate"/>
                <apex:inputField value="{!processor.webinar.Attentive_Rate_at_Close__c}" id="attentiverate" required="true"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!AND(processor.configuration.showWebinarType,NOT(processor.configuration.webinarstamptype = 'USOP'), NOT(processor.configuration.webinarstamptype = 'USC'),NOT(processor.configuration.webinarstamptype = 'UMS'),NOT(processor.configuration.webinarstamptype = 'LMFS'))}" >
                <apex:outputLabel value="Webinar Type" for="webinarType"/>
                <apex:inputField value="{!processor.webinar.Type_of_Webinar__c}" id="webinarType" required="false"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!isNotClassesProcessor}" >
                <apex:outputLabel value="Webinar Deck" for="webinarDeck"/>
                <apex:inputField value="{!processor.webinar.Webinar_Deck__c}" id="webinarDeck" required="false"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!if(BEGINS(selectedProcessorName,'ReadyTalk'),true,false)}" >
                <apex:outputLabel value="Actual Start Time" for="actualstart"/>
                <apex:inputField value="{!processor.webinar.Actual_Start_Time__c}" id="actualstart" required="true"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!processor.configuration.showWebinarType}" >
                <apex:outputLabel value="Time at Close" for="timeAtClose"/>
                <apex:inputField value="{!processor.webinar.Time_at_Close__c}" id="timeAtClose" required="true"/>
            </apex:pageBlockSectionItem>
             
            <apex:pageBlockSectionItem rendered="{!if(BEGINS(selectedProcessorName,'ReadyTalk'),true,false)}" >
                <apex:outputLabel value="Actual Duration (minutes)" for="actualduration"/>
                <apex:inputField value="{!processor.webinar.Actual_Duration__c}" id="actualduration" required="true"/>
            </apex:pageBlockSectionItem>
            
            <apex:pageBlockSectionItem rendered="{!processor.configuration.showWebinarType}" >
                <apex:outputLabel value="Stamp Type" for="stamptype"/>
                <apex:inputField value="{!processor.webinar.StampType__c}" id="stamptype" required="true"/>
            </apex:pageBlockSectionItem>
                       
            <apex:pageBlockSectionItem rendered="{!AND(NOT(processor.configuration.webinarstamptype = 'Continued Education'),NOT(processor.configuration.webinarstamptype = 'LMFS'),isNotClassesProcessor)}" >
                <apex:outputLabel value="Bypass Opportunity Logic" for="bypassopportunitylogic"/>
                <apex:inputCheckbox value="{!processor.configuration.bypassOpportunityLogic}" id="bypassopportunitylogic" />
            </apex:pageBlockSectionItem>

        </apex:pageBlockSection>

        <apex:pageBlockButtons id="processorNavigation" location="bottom">
            <apex:commandButton value="Cancel" action="{!loadProcessorHomePage}" id="cancel"/>
            <apex:commandButton value="Continue" action="{!loadProcessorPreviewPage}" id="continue" onclick="modal.open();"/>
        </apex:pageBlockButtons>
        
    </apex:pageBlock>
    
</apex:form>

<!-- Modal -->
<div id='overlay' style="display:none;"></div>
<div id='modal' style="display:none;">
    <div id='content'></div>
</div>

<apex:includeScript value="{!$Resource.jquery_V_1_11_0}"/>
<apex:includeScript value="{!URLFOR($Resource.jquery_ui, '/jquery_ui/js/jquery-ui-1.10.4.custom.min.js')}"/>
<script>
    $j = jQuery.noConflict();
    $j(".datepicker").datepicker({dateFormat: 'yy-mm-dd'});
    var modal = (function() {
        var 
        method = {},
        $joverlay,
        $jmodal,
        $jcontent,
        $jclose;
    
        // Center the modal in the viewport
        method.center = function () {
            var top, left;
    
            top = Math.max($j(window).height() - $jmodal.outerHeight(), 0) / 2;
            left = Math.max($j(window).width() - $jmodal.outerWidth(), 0) / 2;
    
            $jmodal.css({
                top:top + $j(window).scrollTop(), 
                left:left + $j(window).scrollLeft()
            });
        };
    
        // Open the modal
        method.open = function () {
    
            $jmodal.css({
                width: 'auto', 
                height: 'auto'
            });
    
            method.center();
            $j(window).bind('resize.modal', method.center);
            $jmodal.show();
            $joverlay.show();
        };
    
        // Close the modal
        method.close = function () {
            $jmodal.hide();
            $joverlay.hide();
            $jcontent.empty();
            $j(window).unbind('resize.modal');
        };
    
        // Generate the HTML and add it to the document
        $joverlay = $j('<div id="overlay"></div>');
        $jmodal = $j('<div id="modal"><img src="{!$Resource.loader}" alt="loading"></div>');
        //$jcontent = $j('<div id="content"></div>');
    
        $jmodal.hide();
        $joverlay.hide();
        //$jmodal.append($jcontent);
    
        $j(document).ready(function(){
            $j('body').append($joverlay, $jmodal);                      
        });

        return method;
    }());
    
</script>

</body>

</apex:page>