<apex:page standardController="Lead" extensions="Extension_LeadMergeReader" showHeader="false" sidebar="false">
<head>

</head>
<apex:form >
	<apex:pageBlock title="Merged Lead Reader" id="mergedLeadReader">
	
		<apex:pageBlockSection title="Merged Leads" columns="1">
			<apex:outputPanel id="mergedleads">
				
				<apex:panelGrid id="navigation" columns="5">
					<apex:commandButton value="|<" action="{!First}" disabled="{!!HasPrevious}" rerender="mergedLeadReader" status="mergereaderstatus"/>
					<apex:commandButton value="<" action="{!Previous}" disabled="{!!HasPrevious}" rerender="mergedLeadReader" status="mergereaderstatus"/>
					<apex:commandButton value=">" action="{!Next}" disabled="{!!HasNext}" rerender="mergedLeadReader" status="mergereaderstatus"/>
					<apex:commandButton value=">|" action="{!Last}" disabled="{!!HasPrevious}" rerender="mergedLeadReader" status="mergereaderstatus"/>
					<apex:actionStatus startText=" (updating...)" stopText=" ({!resultSize} Results) -- Page {!pageNumber} of {!numberOfPages}" id="mergedleadreaderstatus"/>
				</apex:panelGrid>
				
				<apex:pageBlockTable value="{!records}" var="mergedLead">
	
					<apex:column >
	               		<apex:facet name="header">Id</apex:facet>
	                       <apex:commandLink value="{!mergedLead['Id']}" action="{!setLead}" rerender="mergedLeadReader" status="mergedleadreaderstatus">
	                       		<apex:param name="mergeId" value="{!mergedLead['Id']}" assignTo="{!selectedMergedLeadId}"/>	
	                       </apex:commandLink>
	           		</apex:column>
	           		
	           		<apex:repeat value="{!leadMergerSettings}" var="mergersetting">
	           			<apex:column value="{!mergedLead[mergersetting.Field_Name__c]}" rendered="{!mergersetting.Show_on_Table__c}"/>
	           		</apex:repeat>
				
				</apex:pageBlockTable>
	
			</apex:outputPanel>
		</apex:pageBlockSection>

		<apex:dynamicComponent componentValue="{!mergedLeadSection}"/>
		
		<apex:pageBlockSection title="History" columns="1">
			<apex:dynamicComponent componentValue="{!mergedLeadHistorySection}"/>
		</apex:pageBlockSection>

	</apex:pageBlock>
</apex:form>
</apex:page>